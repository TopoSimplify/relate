package main

import (
	"github.com/intdxdt/geom"
	"fmt"
	"simplex/relate/homotopy"
)

/**
should test viability of full extended simple with
	even and 1-odd -- with forward and reverse decomposition
 */

func loads(wkt string) []*geom.Point {
	return geom.NewLineStringFromWKT(wkt).Coordinates()
}
func printPolys(sb *homotopy.SBounds) {
	for _, o := range sb.Regions {
		fmt.Println(o.WKT())
	}
}

func main() {
	//var wkt = "LINESTRING ( 2900 1750, 2900 1600, 3000 1600, 3000 2000, 4000 2000, 4000 1600, 3800 1600, 3800 1900, 3600 1800, 3600 1600, 3400 1600, 3400 1900, 3100 1900, 3100 1600, 3200 1600, 3200 1800, 3300 1800, 3300 1600, 3300 1500, 4100 1500, 4100 1750 )"
	//odd - ext - even
	//var wkt = "LINESTRING ( 586.1365464176768 340.48547016799586, 586.9077247835168 292.6344641285775, 604.4360595339316 263.18686174788064, 652.8142634450764 237.2449263172667, 751.674071437416 228.8313256370676, 867.3610807901538 247.7619271675156, 890.4984826607014 329.09340040944033, 876.4758148603695 392.19540551093365, 827.396477559208 420.24074111159734, 799.3511419585443 413.930540601448, 797.2477417884945 390.79313873090047, 826.6953441691915 366.25347008031974, 846.327079089656 353.63306906002106, 856.8440799399049 326.28886684937396, 849.8327460397389 298.94466463872686, 822.4885438290919 288.42766378847796, 788.8341411082954 302.45033158880983, 775.5126066979802 355.03533584005424, 761.4899388976484 381.67840466068475, 734.1457366870012 379.57500449063497, 717.318535326603 331.1968005794901, 717.318535326603 294.0367309086107, 659.1244639552258 294.0367309086107, 631.0791283545622 371.1614038104359, 650.0097298850101 447.58494332224444, 688.5720663359227 481.9404794330575, 806.6017791867839 509.8546372625337, 917.5471241978142 496.8975166773039, 986.3818273068476 442.63957422665396, 1009.128837311175 354.791694064519, 1000 300, 955.7766323591682 287.4437385319869, 936.3623691962958 313.2709727612358, 947.4987309748076 338.3020128594936 )"
	//odd - check odd - 1 = even algor
	var wkt = "LINESTRING ( 586.1365464176768 340.48547016799586, 586.9077247835168 292.6344641285775, 604.4360595339316 263.18686174788064, 652.8142634450764 237.2449263172667, 751.674071437416 228.8313256370676, 867.3610807901538 247.7619271675156, 890.4984826607014 329.09340040944033, 876.4758148603695 392.19540551093365, 827.396477559208 420.24074111159734, 799.3511419585443 413.930540601448, 797.2477417884945 390.79313873090047, 826.6953441691915 366.25347008031974, 846.327079089656 353.63306906002106, 856.8440799399049 326.28886684937396, 849.8327460397389 298.94466463872686, 822.4885438290919 288.42766378847796, 788.8341411082954 302.45033158880983, 775.5126066979802 355.03533584005424, 761.4899388976484 381.67840466068475, 734.1457366870012 379.57500449063497, 717.318535326603 331.1968005794901, 717.318535326603 294.0367309086107, 659.1244639552258 294.0367309086107, 631.0791283545622 371.1614038104359, 650.0097298850101 447.58494332224444, 688.5720663359227 481.9404794330575, 761.4899388976484 502.9744811335553, 837.913478409457 498.06654740343913, 900.3143501209337 467.91781163272566, 931.8653526716803 420.24074111159734, 947.2902872520453 370.4602704204193, 947.4987309748076 338.3020128594936 )"
	var sb = homotopy.SimpleBounds(loads(wkt), false)
	fmt.Println(sb.RegionCount())
	fmt.Println(sb.IsEven())
	printPolys(sb)
}
